spring.application.name=bedrock-summarizer
server.servlet.context-path=/api/v2/summarizer
server.port=8083

# Flyway is for build/deploy only, not runtime
spring.flyway.enabled=false

# JOOQ config - turn off banner and tips output
logging.level.org.jooq.Constants=off

# Default data source
spring.datasource.url=jdbc:postgresql://${DB_HOST}:${DB_PORT}/${DB_NAME}?sslmode=${DB_SSL_MODE}
spring.datasource.username=${DB_USER}
spring.datasource.password=${DB_PASSWORD}
spring.datasource.driver-class-name=org.postgresql.Driver
spring.datasource.leakDetectionThreshold=30000
spring.datasource.poolName=WritePool

# Connection pool optimizations
spring.datasource.maximum-pool-size=20
spring.datasource.minimum-idle=5
spring.datasource.connection-timeout=30000
spring.datasource.idle-timeout=90000
spring.datasource.keepalive-time=60000
spring.datasource.max-lifetime=240000

# AWS Configuration
aws.region=${AWS_REGION:us-east-1}
aws.bedrock.model-id=amazon.titan-text-express-v1
aws.bedrock.fallback-model-id=anthropic.claude-v2
aws.bedrock.max-tokens=2000
aws.bedrock.temperature=0.1
aws.bedrock.timeout-seconds=30

# Summarization Configuration
summarization.async.enabled=true
summarization.async.thread-pool-size=5
summarization.cache.enabled=true
summarization.cache.ttl-minutes=60
summarization.batch.max-notes-per-summary=50
summarization.batch.default-note-limit=20

# AWS SQS Configuration (if using event-driven architecture)
spring.cloud.aws.region.static=us-east-1
spring.cloud.aws.credentials.access-key=test
spring.cloud.aws.credentials.secret-key=test
spring.cloud.aws.sqs.endpoint=http://localhost:4566
spring.cloud.aws.sqs.queue-not-found-strategy=fail

# API Documentation
springdoc.api-docs.path=/api-docs
springdoc.swagger-ui.path=/swagger-ui.html

# Public URLs (no auth required)
flo.skip-auth-urls=/ping,/health,/health/**,/api-docs.yaml,/api-docs,/api-docs/**,/swagger-ui,/swagger-ui/**

# Actuator Configuration
management.endpoints.web.exposure.include=health,info,metrics,prometheus
management.endpoint.health.show-details=always
management.metrics.export.prometheus.enabled=true

# Logging
logging.level.com.flo.bedrock_summarizer=INFO
logging.level.software.amazon.awssdk=WARN
logging.level.org.springframework.web=INFO
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} - %msg%n
